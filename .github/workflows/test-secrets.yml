name: Test Secrets

on:
  push:
    branches: [ main, master ]

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    steps:
    - name: Test Docker Hub Secrets
      run: |
        echo "Testing Docker Hub secrets..."
        echo "Username exists: ${{ secrets.DOCKER_HUB_USERNAME != '' }}"
        echo "Token exists: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN != '' }}"
        echo "Username length: ${{ secrets.DOCKER_HUB_USERNAME != '' && 'set' || 'not set' }}"
        echo "Token length: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN != '' && 'set' || 'not set' }}"
        
        if [ "${{ secrets.DOCKER_HUB_USERNAME }}" = "" ]; then
          echo "❌ DOCKER_HUB_USERNAME is empty or not set"
          exit 1
        fi
        
        if [ "${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}" = "" ]; then
          echo "❌ DOCKER_HUB_ACCESS_TOKEN is empty or not set"
          exit 1
        fi
        
        echo "✅ Both secrets are set correctly"
